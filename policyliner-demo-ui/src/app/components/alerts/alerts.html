<h1 class="alerts-header">Alerts</h1>
<div class="alerts-container">
  <div class="alerts-filter">
    <mat-form-field>
    <mat-label>Search Alerts</mat-label>
    <input matInput type="text" #filter/>
    </mat-form-field>
    <button matFab type="button" (click)="filterAlerts(filter.value)">
      <mat-icon>search</mat-icon></button>
  </div>
  <div class="alert-cards-div">
  @for (alert of alerts; track alert.id){
    <mat-card class="alert-card">
      <mat-card-header>
        <mat-card-title>{{alert.type}}</mat-card-title>
        <mat-card-subtitle>{{alert.severity}}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p class="{{alert.isResolved ? 'green-icon' : 'red-icon' }}">{{alert.isResolved ? "RESOLVED" : "NEEDS ATTENTION"}}</p>
        <p>Created at: {{alert.createdAt | date:"MMM dd, yyyy 'at' HH:mm"}}</p>
        @if (alert.isResolved) {
          <p>Resolved at: {{alert.resolvedAt | date:"MMM dd, yyyy 'at' HH:mm"}}</p>
        }
      </mat-card-content>
      <mat-card-actions>
        <button mat-button (click)="resolveAlert(alert.id)">Resolve</button>
        <button mat-raised-button routerLink="/alert-details/{{alert.id}}">Details</button>
      </mat-card-actions>
    </mat-card>
  }
  </div>
  <mat-paginator class="alert-paginator"
                 [length]="totalElements"
                 [pageSize]="pageSize"
                 [pageIndex]="pageNumber"
                 [showFirstLastButtons]="true"
                 [pageSizeOptions]="[10, 25, 50, 100]">
  </mat-paginator>

</div>
