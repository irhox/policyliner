@if (query) {
  <div class="query-detail-container">
    <mat-card class="query-card">
      <mat-card-header>
        <mat-card-title>Query Details</mat-card-title>
        <mat-card-subtitle>{{ query.id }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <table class="detail-table">
          <tr>
            <td><strong>Status</strong></td>
            <td>
            <span [ngClass]="query.status?.toLowerCase()">
              {{ query.status }}
            </span>
            </td>
          </tr>
          <tr>
            <td><strong>Inspection Status</strong></td>
            <td>
            <span [ngClass]="query.inspectionStatus?.toLowerCase()">
              {{ query.inspectionStatus }}
            </span>
            </td>
          </tr>
          <tr>
            <td><strong>Message</strong></td>
            <td>{{ query.message }}</td>
          </tr>
          <tr>
            <td><strong>Created At</strong></td>
            <td>{{ query.createdAt | date: 'medium' }}</td>
          </tr>
          <tr>
            <td><strong>Alert IDs</strong></td>
            <td>
              @if (query && query.alertSeverityMap && query.alertSeverityMap.size > 0) {
                <mat-chip-listbox>
                  @for (entry of query.alertSeverityMap | keyvalue; track entry.key) {
                    <mat-chip class="{{entry.value.toLowerCase()}}-chip" routerLink="/alert-details/{{entry.key}}">{{ entry.key + " : " + entry.value }}</mat-chip>
                  }
                </mat-chip-listbox>
              } @else {
                <p>None</p>
              }
            </td>
          </tr>
        </table>
      </mat-card-content>

      <mat-card-actions>
        <button mat-button color="accent" routerLink="/queries">Back</button>
      </mat-card-actions>
    </mat-card>
  </div>
}
